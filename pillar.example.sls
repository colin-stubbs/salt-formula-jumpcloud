{# if using kickstart script method provided by jumpcloud.com #}

jumpcloud:
  linux:
    config_method: 'kickstart'
  connect_key: 'TheLongHexStringFromJumpCloudPortal'

{# if using sssd/LDAP method provided by jumpcloud.com LDAP service #}

jumpcloud:
  linux:
    config_method: 'sssd'
  connect_key: 'TheLongHexStringFromJumpCloudPortal'

sssd:
  lookup:
    pkgs:
      - sssd
      - sssd-common
      - sssd-client
      - sssd-tools
    locations:
      config_file: '/etc/sssd/sssd.conf'
  service:
    manage: True
  config:
    manage: True
    ca-certificates: |
      -----BEGIN CERTIFICATE-----
      MIIEADCCAuigAwIBAgIBADANBgkqhkiG9w0BAQUFADBjMQswCQYDVQQGEwJVUzEh
      MB8GA1UEChMYVGhlIEdvIERhZGR5IEdyb3VwLCBJbmMuMTEwLwYDVQQLEyhHbyBE
      YWRkeSBDbGFzcyAyIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA0MDYyOTE3
      MDYyMFoXDTM0MDYyOTE3MDYyMFowYzELMAkGA1UEBhMCVVMxITAfBgNVBAoTGFRo
      ZSBHbyBEYWRkeSBHcm91cCwgSW5jLjExMC8GA1UECxMoR28gRGFkZHkgQ2xhc3Mg
      MiBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTCCASAwDQYJKoZIhvcNAQEBBQADggEN
      ADCCAQgCggEBAN6d1+pXGEmhW+vXX0iG6r7d/+TvZxz0ZWizV3GgXne77ZtJ6XCA
      PVYYYwhv2vLM0D9/AlQiVBDYsoHUwHU9S3/Hd8M+eKsaA7Ugay9qK7HFiH7Eux6w
      wdhFJ2+qN1j3hybX2C32qRe3H3I2TqYXP2WYktsqbl2i/ojgC95/5Y0V4evLOtXi
      EqITLdiOr18SPaAIBQi2XKVlOARFmR6jYGB0xUGlcmIbYsUfb18aQr4CUWWoriMY
      avx4A6lNf4DD+qta/KFApMoZFv6yyO9ecw3ud72a9nmYvLEHZ6IVDd2gWMZEewo+
      YihfukEHU1jPEX44dMX4/7VpkI+EdOqXG68CAQOjgcAwgb0wHQYDVR0OBBYEFNLE
      sNKR1EwRcbNhyz2h/t2oatTjMIGNBgNVHSMEgYUwgYKAFNLEsNKR1EwRcbNhyz2h
      /t2oatTjoWekZTBjMQswCQYDVQQGEwJVUzEhMB8GA1UEChMYVGhlIEdvIERhZGR5
      IEdyb3VwLCBJbmMuMTEwLwYDVQQLEyhHbyBEYWRkeSBDbGFzcyAyIENlcnRpZmlj
      YXRpb24gQXV0aG9yaXR5ggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQAD
      ggEBADJL87LKPpH8EsahB4yOd6AzBhRckB4Y9wimPQoZ+YeAEW5p5JYXMP80kWNy
      OO7MHAGjHZQopDH2esRU1/blMVgDoszOYtuURXO1v0XJJLXVggKtI3lpjbi2Tc7P
      TMozI+gciKqdi0FuFskg5YmezTvacPd+mSYgFFQlq25zheabIZ0KbIIOqPjCDPoQ
      HmyW74cNxA9hi63ugyuV+I6ShHI56yDqg+2DzZduCLzrTia2cyvk0/ZM/iZx4mER
      dEr/VxqHD3VILs9RaRegAhJhldXRQLIQTO7ErBBDpqWeCtWVYpoNz4iCxTIM5Cuf
      ReYNnyicsbkqWletNw+vHX/bvZ8=
      -----END CERTIFICATE-----
    options:
      sssd:
        config_file_version: 2
        services: 'nss, pam, ssh'
        domains: 'jumpcloud'
      'domain/jumpcloud':
        debug_level: 2
        id_provider: ldap
        enumerate: 'true'
        auth_provider: 'ldap'
        cache_credentials: 'true'
        ldap_uri: 'ldaps://ldap.jumpcloud.com:636'
        ldap_search_base: 'o=ORG_ID,dc=jumpcloud,dc=com'
        ldap_default_bind_dn: 'uid=service-account,ou=Users,o=ORG_ID,dc=jumpcloud,dc=com'
        ldap_default_authtok: 'PASSWORD'
        ldap_user_ssh_public_key: sshKey
        ldap_tls_cacert: '/etc/sssd/certs/ca-certificates.crt'
        sudo_provider: none
  authconfig:
    updateall_args: '--enablesssd --enablesssdauth --disableldap --disableldapauth --enablemkhomedir --updateall'
